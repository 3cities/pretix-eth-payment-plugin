(()=>{"use strict";const t={selectedAccount:null,signedByAccount:null,messageSignature:null,paymentDetails:null,signatureRequested:!1,transactionRequested:!1,transactionHashSubmitted:!1,lastOrderStatus:"",elements:{divPrepare:document.getElementById("prepare"),divError:document.getElementById("message-error"),divSuccess:document.getElementById("success"),divTransactionHash:document.getElementById("pretix-eth-transaction-hash"),aOrderDetailURL:document.getElementById("pretix-order-detail-url"),aNetworkData:document.getElementById("pretix-data-chain-info"),buttonConnect:document.getElementById("btn-connect"),submittedTransactionHash:document.getElementById("pretix-eth-submitted-transaction-hash"),paymentNetworkName:document.getElementById("payment-network-id")},selectors:{paymentSteps:document.querySelectorAll(".pretix-eth-payment-steps")},chains:[],web3Modal:null};async function e(){let e=t.elements.aOrderDetailURL.getAttribute("data-order-detail-url");const n=function(t){t+="=";const e=decodeURIComponent(document.cookie).split(";");for(let n=0;n<e.length;n++){const a=e[n].trim();if(0==a.indexOf(t))return a.substring(17,a.length)}}("pretix_csrftoken");let a=await fetch(e,{headers:{"X-CSRF-TOKEN":n,"HTTP-X-CSRFTOKEN":n}});if(a.ok){let e=await a.json();""===t.lastOrderStatus?t.lastOrderStatus=e.status:t.lastOrderStatus!==e.status&&"p"===e.status&&location.reload()}}window.addEventListener("load",(async()=>{await async function(){let e=t.elements.aOrderDetailURL.getAttribute("data-chains-json-url");await fetch(e).then((t=>t.json())).then((e=>{t.chainsRaw=e,e.forEach((e=>{t.chains[e.chain]=t.chains[e.chain]||[],t.chains[e.chain][e.networkId]=e}))})).catch((t=>console.error(t)))}();const n=t.elements.submittedTransactionHash;if(null!==n){const a=t.elements.aNetworkData.getAttribute("data-chain-id"),s=n.innerText;n.innerHTML=function(e,n){return void 0!==t.chains.ETH&&void 0!==t.chains.ETH[e]&&void 0!==t.chains.ETH[e].explorers?'<a href="'+t.chains.ETH[e].explorers[0].url+"/tx/"+n+'" target="_blank">'+n+"</a>":n}(a,s),await async function(){for(;;)await e(),await new Promise((t=>setTimeout(t,5e3)))}()}}))})();